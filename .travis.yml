language: java

# moving to Ubuntu Bionic 18.04, see https://docs.travis-ci.com/user/reference/overview/
dist: bionic

env:
  global:
  - M2_HOME="/usr/local/maven"
  matrix:
  - SCRIPT=travis-jdk8.sh
  - SCRIPT=travis-jdk10.sh
  - SCRIPT=travis-jdk11.sh
  - SCRIPT=travis-coverage.sh
  - SCRIPT=travis-extra.sh

# in langage:java, Travis executes by default "mvn install -DskipTests=true -Dmaven.javadoc.skip=true -B -V"
# This is not what we want because:
#   - it executes checkstyle (we have a specific job for this)
#   - it's useless ("mvn test" later does all the necessary tasks automatically)
#   - it makes the build longer (we want a fast job)
# Java8, see https://tecadmin.net/install-oracle-java-8-ubuntu-via-ppa/
install:
  - sudo add-apt-repository ppa:webupd8team/java
  - sudo apt-get update
  - sudo apt-get install oracle-java8-installer

script: ./chore/travis/$SCRIPT

cache:
  directories:
  - $HOME/.m2

before_cache:
  - rm -rf $HOME/.m2/fr/inria/ # delete all to be sure we always get last snapshot of spoon
